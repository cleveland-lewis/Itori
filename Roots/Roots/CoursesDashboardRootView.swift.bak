import SwiftUI

struct CoursesDashboardRootView: View {
    @State private var courses: [CourseDashboard] = CourseDashboard.dummyData
    @State private var selectedCourse: CourseDashboard?
    @State private var selectedTab: CoursesDashboardFloatingNav.DashboardTab = .courses

    var body: some View {
        ZStack(alignment: .bottom) {
            // Main Content
            HStack(spacing: 0) {
                // Left Sidebar
                CoursesDashboardSidebar(
                    courses: courses,
                    selectedCourse: $selectedCourse,
                    onNewCourse: {
                        print("New Course tapped")
                    },
                    onEditCourses: {
                        print("Edit Courses tapped")
                    }
                )

                Divider()

                // Right Detail Panel
                if let selectedCourse = selectedCourse {
                    CoursesDashboardDetail(course: selectedCourse)
                } else {
                    emptyDetailState
                }
            }
            .background(DesignSystem.Colors.appBackground)

            // Floating Navigation Bar
            CoursesDashboardFloatingNav(selectedTab: $selectedTab)
                .padding(.bottom, 16)
        }
        .frame(minWidth: 900, minHeight: 600)
        .onAppear {
            // Select first course by default
            if selectedCourse == nil, let first = courses.first {
                selectedCourse = first
            }
        }
    }

    private var emptyDetailState: some View {
        VStack(spacing: 16) {
            Image(systemName: "book.closed")
                .font(.system(size: 64))
                .foregroundStyle(.tertiary)

            Text("Select a Course")
                .font(.title2.weight(.semibold))
                .foregroundStyle(.primary)

            Text("Choose a course from the sidebar to view details")
                .font(.subheadline)
                .foregroundStyle(.secondary)
        }
        .frame(maxWidth: .infinity, maxHeight: .infinity)
        .background(DesignSystem.Colors.appBackground)
    }
}

// MARK: - Preview

#Preview {
    CoursesDashboardRootView()
        .frame(width: 1200, height: 800)
}
